<ion-card *ngIf="chiesa">
  <ion-card-header>

    <ion-item lines="none">
      <ion-card-title class="ion-text-wrap title xx-large" [innerHTML]="chiesa[0]?.title.rendered"></ion-card-title>
    </ion-item>
    <ion-item *ngIf="!virtualTour">
      <span class=" ion-text-wrap text larger">
        {{ 'inzia-visita-interattiva' | translatePipe}}
      </span>
      <ion-button fill="outline" color="dark" slot="end" [routerLink]="['/tablinks/dashboard']">
        <ion-icon name="radio-outline" class="title"></ion-icon>
      </ion-button>
    </ion-item>

  </ion-card-header>

  <ion-slides pager="true" [options]="slideOpts">
    <ion-slide *ngFor="let foto of chiesa[0]?.pmdb_galleria_foto">
      <img class="img-chiesa" src="{{foto}}" (click)="showImageFullScren(foto)" />
    </ion-slide>
  </ion-slides>

  <ion-card-content>

    <ion-item lines="none">
      <ion-icon class="title"  slot="start" name="pin-outline"></ion-icon>
      <span class="ion-text-wrap text larger" [innerHTML]="chiesa[0]?.pmdb_location_city"></span>
    </ion-item>

    <ion-item lines="none">
      <ion-icon class="title"  slot="start" name="text-outline"></ion-icon>
      <span class="ion-text-wrap text larger">
        {{ 'narrazione' | translatePipe}}
      </span>
    </ion-item>

    <ion-item>
      <span class="ion-text-wrap text larger" class="ion-text-wrap" color="dark" [innerHTML]="chiesa[0]?.content.rendered"></span>

    </ion-item>


    <div >
      <ion-item lines="none">
        <ion-icon class="title" slot="start" name="film-outline"></ion-icon>
        <span class="ion-text-wrap title x-large">
          {{ 'multimedia' | translatePipe}}
        </span>
      </ion-item>

      <ion-item lines="none" class="ion-margin-top" *ngIf="chiesa[0].audio">
        
        <!-- player -->
      <ion-grid class="audio-container" >
        <ion-row class="ion-align-items-center">
          <ion-col size="auto">
            <ion-button
              aria-label="play"
              *ngIf="nowPlayingAudioIndex !== i || audioIsPaused"
              [color]="nowPlayingAudioIndex == i ? 'primary' : 'medium'"
              (click)="playPlauseAudio(i, chiesa[0]?.audio )"
            >
              <ion-icon
                ios="play-outline"
                md="play-sharp"
                slot="icon-only"
              ></ion-icon>
            </ion-button>

            
          </ion-col>

          <ion-col>
            <ion-range
              #range
              min="0"
              [max]="nowPlayingAudioIndex == i ? audioDuration : 100"
              [value]="nowPlayingAudioIndex == i ? audioProgress : 0"
              [color]="nowPlayingAudioIndex == i ? 'primary' : 'medium'"
              pin="false"
              mode="md"
              debounce="0"
              (touchstart)="pauseWhileSeeking(i)"
              (mousedown)="pauseWhileSeeking(i)"
              (touchend)="seek(i,$event)"
              (mouseup)="seek(i, $event)"
            ></ion-range>
          </ion-col>
          <ion-col size="auto">
            <ion-text
              class="timestamp"
              [color]="nowPlayingAudioIndex == i ? 'dark' : 'medium'"
              >{{nowPlayingAudioIndex == i && audioPlayer?
              getAudioProgress(audioPlayer.currentTime) :
              '00:00'}}</ion-text
            >
          </ion-col>
        </ion-row>
      </ion-grid>
      <!-- end player -->
      </ion-item>

    </div>

    <ion-item lines="none">
      <ion-icon class="title" slot="start" name="map-outline"></ion-icon>
      <span class="ion-text-wrap text larger">
        {{ 'chiese' | translatePipe}}
      </span>
    </ion-item>

    <ion-item *ngFor="let chiese of chiesa[0]?.chiese" lines="none">

      <ion-button class="ion-text-wrap title"  color="dark" fill="outline" slot="start"
        [routerLink]="['/tablinks/chiesa-detail', chiese.id]" [innerHTML]="chiese?.title.rendered">
      </ion-button>
    </ion-item>
  </ion-card-content>
</ion-card>


<ion-card *ngIf="!chiesa">
  <div class="ion-padding custom-skeleton">
    <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
    <ion-skeleton-text animated></ion-skeleton-text>
    <ion-skeleton-text animated style="width: 88%"></ion-skeleton-text>
    <ion-skeleton-text animated style="width: 70%"></ion-skeleton-text>
    <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
  </div>


  <ion-card-header>

    <ion-item lines="none">
      <ion-card-title class="ion-text-wrap">
        <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
      </ion-card-title>
      <ion-icon>
        <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
      </ion-icon>
    </ion-item>
    <ion-item>
      <ion-card-title class="ion-text-wrap">
        <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
      </ion-card-title>
      <ion-icon>
        <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
      </ion-icon>
    </ion-item>
  </ion-card-header>
  <ion-card-content>

    <ion-item lines="none">
      <ion-label>
        <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
      </ion-label>
    </ion-item>

    <ion-item>
      <ion-label>
        <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
      </ion-label>
    </ion-item>

    <ion-item lines="none">
      <ion-label>
        <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text>
      </ion-label>
    </ion-item>


    <ion-item>
      <ion-label>
        <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text>
      </ion-label>
    </ion-item>

  </ion-card-content>
</ion-card>